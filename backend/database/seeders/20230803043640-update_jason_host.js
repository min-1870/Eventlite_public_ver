/**
 * Seed file for updating events' host status.
 * Automatically generated by sequelize.
 * DO NOT MODIFY
 */
'use strict';

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface, Sequelize) {
    const event1 = await queryInterface.rawSelect('Events', {
      where: {
        event_name: "John's 50th",
      }
    }, ['id']);

    const event2 = await queryInterface.rawSelect('Events', {
      where: {
        event_name: "Information Night",
      }
    }, ['id']);

    const event3 = await queryInterface.rawSelect('Events', {
      where: {
        event_name: "Cricket Match",
      }
    }, ['id']);

    const event4 = await queryInterface.rawSelect('Events', {
      where: {
        event_name: "Ethan's last day",
      }
    }, ['id']);

    const event5 = await queryInterface.rawSelect('Events', {
      where: {
        event_name: "Womens FIFA worldcup",
      }
    }, ['id']);

    const event6 = await queryInterface.rawSelect('Events', {
      where: {
        event_name: "Min's graduation",
      }
    }, ['id']);

    const userJason = await queryInterface.rawSelect('Users', {
      where: {
        username: 'Jason'
      },
    }, ['id']);

    if (event1 !== undefined && event2 !== undefined && userJason !== undefined) {
      return Promise.all([
        queryInterface.bulkUpdate('Users', {
          eventsHosted: `{${event1},${event2},${event3},${event4},${event5},${event6}}`
        }, {
          id: userJason
        })
      ])
    }
  },

  async down(queryInterface, Sequelize) {
    const userJason = await queryInterface.rawSelect('Users', {
      where: {
        username: 'Jason'
      },
    }, ['id']);

    return Promise.all([
      queryInterface.bulkUpdate('Users', {
        eventsHosted: `{}`
      }, {
        id: userJason
      })
    ])
  }
};
